<!DOCTYPE html>
<html>

<head>
    {% load static %}
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="{% static 'formapp/Lost_and_found_account.css' %}">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css" rel="stylesheet">
    <title>{% if edit %}Edit Lost Item{% else %}Lost Item Listing{% endif %}</title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
</head>

<body>

    <!-- Navbar -->
    <nav class="navbar navbar-dark fixed-top">
        <div class="container-fluid">
            <div class="navbar ">
                <span class="navbar-brand mt-0 h1"></span>
            </div>
        </div>
    </nav>

    <!-- Sidebar -->
    <div class="side_bar">
        <div class="logo_name">UNION HUB</div>

        <div class="nav_opt">
            <a href="{% url 'dashboard' %}">
                <i class="bi bi-house-fill"></i> Home
            </a>
        
            <a href="{% url 'roommates' %}">
                <i class="bi bi-search"></i> Browse Roommates
            </a>
        
            <a href="{% url 'lost_found_list' %}">
                <i class="bi bi-binoculars-fill"></i> Lost & Found
            </a>
        </div>
    </div>

    <div class="sidebar-spacer d-none d-lg-block"></div>

    <!-- Main Page -->
    <div class="main_container">
        <div class="container-fluid">

            <div class="row h-100">

                <div class="col-12 col-md-8 col-lg-4 mainbg">

                    <form
                        action="{% if edit %}{% url 'lost_found_edit' item.id %}{% else %}{% url 'lost_found_form' %}{% endif %}"
                        method="post" class="container-fluid" enctype="multipart/form-data">
                        {% csrf_token %}
                        <div class="row align-items-stretch h-100">

                            <!-- LEFT SIDE — Picture + Description -->
                            <div class="col-12 col-lg-7">
                                <div class="border rounder roommate_details flex-fill">

                                    <!-- PREVIEW OF IMAGE IF EDITING -->
                                    {% if edit and item.item_picture %}
                                    <div class="mb-3 text-center">
                                        <img src="{{ item.item_picture.url }}" class="rounded shadow"
                                            style="width:150px; height:150px; object-fit:cover;">
                                    </div>
                                    {% endif %}

                                    <!-- File Upload -->
                                    <label for="photoInput" class="upload-box">
                                        <input type="file" id="photoInput" accept="image/*" capture="environment" hidden
                                            name="item_picture">
                                        Click to take or upload picture of item
                                    </label>

                                    <!-- Description -->
                                    <div class="user_description mt-3">
                                        <label class="form-label mb-2">Description of lost item (300 words)</label>
                                        <textarea class="form-control" maxlength="300" name="item_desc"
                                            placeholder="Write details...">{% if edit %}{{ item.item_desc }}{% endif %}</textarea>
                                    </div>

                                </div>
                            </div>

                            <!-- RIGHT SIDE — Info Fields -->
                            <div class="col-12 col-lg-5">
                                <div class="border rounder roommate_details info">

                                    <!-- Item Name -->
                                    <div class="mb-3">
                                        <label class="form-label">Item Name*</label>
                                        <input type="text" class="form-control" placeholder="Enter item name" required
                                            name="item_name" value="{% if edit %}{{ item.item_name }}{% endif %}">
                                    </div>

                                    <!-- Found At -->
                                    <div class="mb-3">
                                        <label class="form-label">Where was the item found?*</label>
                                        <input type="text" class="form-control" placeholder="Enter location" required
                                            name="item_found" value="{% if edit %}{{ item.item_found }}{% endif %}">
                                    </div>

                                    <!-- Submitted To -->
                                    <div class="mb-3">
                                        <label class="form-label">Where is the item submitted to?*</label>
                                        <input type="text" class="form-control" placeholder="NS for 'no submission'"
                                            required name="item_submitted"
                                            value="{% if edit %}{{ item.item_submitted }}{% endif %}">
                                    </div>

                                    <!-- Contact -->
                                    <div class="mb-3">
                                        <label class="form-label">Phone Number / Email</label>
                                        <input type="text" class="form-control" placeholder="Enter contact information"
                                            name="item_contact" value="{% if edit %}{{ item.item_contact }}{% endif %}">
                                    </div>

                                    <p style="color: red; font-size: 12px;">"*" Indicates required fields</p>

                                    <!-- Submit Button -->
                                    <div class="d-flex justify-content-end">
                                        <input class="btn btn-primary button" type="submit"
                                            value="{% if edit %}Save Changes{% else %}Submit{% endif %}">
                                    </div>

                                </div>
                            </div>

                        </div>
                    </form>

                </div>
            </div>

        </div>
    </div>

</body>

</html>